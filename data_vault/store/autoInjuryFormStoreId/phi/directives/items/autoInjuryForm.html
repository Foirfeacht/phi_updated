
<div class="row phiTab">
  <div class="col-md-3" ng-click="hideNarrative()">
    <phi-items-list>
        <phi-items-list-bar></phi-items-list-bar>        
        
        <div class="row">
          <div class="col-xs-12">
            <table ng-table="tableParams" class="table">
              <tr ng-repeat="injuryForm in $data" ng-click="onSelect(injuryForm)" ng-class="{'active': isSelected(injuryForm)}">
                
                <td data-title="'Date'" sortable="'date'" width="50%">
                  {{data.record[injuryForm.id].date | date:'MM/dd/yyyy'}}
                  <span class="label label-warning" ng-show="isDirty(vital) || isNew(vital)">Unsaved</span>
                  <span class="label label-danger" ng-hide="isValid(vital)">Invalid</span>
                </td>
                <td data-title="'Name'" sortable="'name'" width="50%">
                  <span>{{data.record[injuryForm.id].name}}</span>
                </td>               
              </tr>           
            </table>
          </div>
        </div>       
    </phi-items-list>
  </div><!-- end col --> 
       
  <div class="col-md-8" ng-click="hideNarrative()">
    <phi-item-form item="selectedInjuryForm">
      <div class="row">
        <div class="col-md-6">
          <label class="control-label">Name</label> 
          <input type="text" class="form-control" ng-model="selectedInjuryForm.name" name="name" id="name" required ng-required="true">
        </div><!-- end col -->

        <div class="col-md-6">
          <label class="control-label">Today's Date</label> 
          <input type="datetime" class="form-control" ng-model="selectedInjuryForm.date" name="date" ui-date ui-date-format="mm/dd/yy">
        </div><!-- end col -->

      </div><!-- end row -->
      <div class="row">
        <div class="col-md-6">
          <label class="control-label">Date of collision</label> 
          <input type="datetime" class="form-control" ng-model="selectedInjuryForm.dateCollision.date" ui-date ui-date-format="mm/dd/yy">
        </div><!-- end col -->

        <div class="row">
        <div class="col-md-2">
          <label class="control-label" id="time-label">Time of collision</label> 
        </div><!-- end col -->  

        <div class="col-md-4">
          <timepicker ng-model="selectedInjuryForm.dateCollision.time" hour-step="hstep" minute-step="mstep" show-meridian="ismeridian"></timepicker>
        </div><!-- end col -->  

      </div><!-- end row -->

      <div class="row">
        <div class="col-md-12">
          <label class="control-label">What Street, Highway or Intersection &amp; What City &amp; State did the collision occur? </label>
          <textarea id="location" ng-model="selectedInjuryForm.location" class="form-control"></textarea>
        </div>
      </div><!-- end row -->
      <div class="row">
        <div class="col-md-12">
          <label class="control-label">Road conditions were </label>
          <input type="radio" value="wet" ng-model="selectedInjuryForm.roadConditions" >WET</input>
          <input type="radio" value="dry" ng-model="selectedInjuryForm.roadConditions" >DRY</input>
          <input type="radio" value="icy" ng-model="selectedInjuryForm.roadConditions" >ICY</input>
          <input type="radio" value="other" ng-model="selectedInjuryForm.roadConditions" >OTHER</input>
        </div>
      </div><!-- end row -->

      <div class="row">
        <div class="col-md-4">
          <label class="control-label">Did the police come to the accident scene? </label>
          <input type="radio" value="yes" ng-model="selectedInjuryForm.police.arrive" >Yes</input>
          <input type="radio" value="no" ng-model="selectedInjuryForm.police.arrive" >No</input>
        </div>        
        <div class="col-md-4">
          <label class="control-label">Is there a report?</label>
          <input type="radio" value="yes" ng-model="selectedInjuryForm.police.report" >Yes</input>
          <input type="radio" value="no" ng-model="selectedInjuryForm.police.report" >No</input>
        </div>  
        <div class="col-md-4">
          <label class="control-label">Did you request the report?</label>
          <input type="radio" value="yes" ng-model="selectedInjuryForm.police.reportRequest" >Yes</input>
          <input type="radio" value="no" ng-model="selectedInjuryForm.police.reportRequest" >No</input>
        </div>  
      </div><!-- end row -->
    </div><!-- end col -->

    </div><!-- end row -->

    <div class="col-md-1 left-trigger" id="narr-trigger" ng-click="showNarrative()">
      
    </div>

    <div class="narrative" id="narr" ng-if='selectedInjuryForm'>
        Injury form for {{selectedInjuryForm.name}} dated from {{selectedInjuryForm.date | date:'MM/dd/yyyy'}} for collision occuring at {{selectedInjuryForm.dateCollision.date | date:'MM/dd/yyyy'}} {{selectedInjuryForm.time}}<br/>
        Injury occured at {{selectedInjuryForm.location}}. Road conditions were {{selectedInjuryForm.roadConditions}}
    </div>
  </phi-item-form>
</div>

